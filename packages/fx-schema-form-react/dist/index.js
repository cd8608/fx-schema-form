!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("recompose"),require("immutable"),require("fx-schema-form-core"),require("react-redux"),require("resolve-pathname"),require("reselect"),require("redux-act"),require("redux"),require("prop-types"),require("ajv")):"function"==typeof define&&define.amd?define("SFR",["react","recompose","immutable","fx-schema-form-core","react-redux","resolve-pathname","reselect","redux-act","redux","prop-typese","ajv"],t):"object"==typeof exports?exports.SFR=t(require("react"),require("recompose"),require("immutable"),require("fx-schema-form-core"),require("react-redux"),require("resolve-pathname"),require("reselect"),require("redux-act"),require("redux"),require("prop-types"),require("ajv")):e.SFR=t(e.React,e.recompose,e.Immutable,e.SFC,e["react-redux"],e["resolve-pathname"],e.reselect,e["redux-act"],e.Redux,e["prop-types"],e.Ajv)}("undefined"!=typeof self?self:this,function(e,t,r,n,o,a,i,c,u,s,f){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(t,r){t.exports=e},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={hoc:"hoc",widget:"widget",template:"temp",field:"field"}},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return c}),r.d(t,"c",function(){return u});var n=r(5),o=(r.n(n),r(16)),a=r(31),i=new n.BaseFactory,c=new n.BaseFactory,u=new n.BaseFactory;o.a.forEach(function(e){c.add(e.name,e.hoc(c))}),i.add("schemaForm",a.a)},function(e,t){e.exports=n},function(e,t,r){e.exports=r(19)},function(e,t,r){"use strict";function n(e,t,r){var n=e.constructor.name;return"Set"===n||"OrderedSet"===n?e[r](t):e.toOrderedSet()[r](t)["to"+n]()}function o(e,t,r){if("function"==typeof r)return r(e,t);switch(r){case"replace":return t;case"append":if(!i.Iterable.isIterable(e))throw new Error('Non-iterable passed to "append" merge function');return e.concat(t);case"prepend":if(!i.Iterable.isIterable(t))throw new Error('Non-iterable passed to "prepend" merge function');return t.concat(e);case"union":if(i.Map.isMap(e))return e.merge(t);if(!i.Iterable.isIterable(e))throw new Error('Non-iterable passed to "union" merge function');return n(e,t,"union");default:throw new Error('Unknown merge function "'+r+'"')}}function a(e,t,r){if(!r||"object"===(void 0===r?"undefined":c(r))&&0===Object.keys(r).length)return i.Iterable.isIterable(e)&&!i.Stack.isStack(e)?e.mergeDeep(t):t;var n=void 0===r?"undefined":c(r);if("string"===n||"function"===n)return o(e,t,r);if("object"!==n)throw new Error("Invalid schema");if(!i.Iterable.isIterable(e)||!i.Iterable.isIterable(t))throw new Error("Only immutable iterables can be merged using merge schema");if(i.Set.isSet(e)||i.Set.isSet(t)||i.Stack.isStack(e)||i.Stack.isStack(t))throw new Error("Sets and Stacks can't be merged with schema");var u=e.constructor.name,s=void 0;switch(u){case"List":s=Object(i.List)([]);break;case"Map":s=Object(i.Map)({});break;case"OrderedMap":s=Object(i.OrderedMap)({});break;default:throw new Error("Unsupported type")}return e.forEach(function(n,o){if(t.has(o)){var i=r?r[o]||r["*"]:void 0;s=s.set(o,a(e.get(o),t.get(o),i))}else s=s.set(o,e.get(o))}),t.forEach(function(r,n){e.has(n)||(s=s.set(n,t.get(n)))}),s}var i=r(3),c=(r.n(i),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e});t.a=a},function(e,t,r){"use strict";var n=r(35),o=r(13);r.d(t,"a",function(){return n.a}),n.a.propTypes=Object.assign({},o.a)},function(e,t){e.exports=o},function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o});var n="data",o="meta"},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",function(){return o});var o=function(){function e(t,r,o){n(this,e),this.key=t,this.value=r,this.parent=o,this.children=[]}return e.prototype.addChild=function(t,r){var n=this,o=null;if(!t.length)return this;for(t=[].concat(t);t.length;){var a=t.shift(),i=a.constructor===Number;o=n.contains(a),o||(i?(o=new e("-",null,n),n.children[a]=o):(o=new e(a.toString(),null,n),n.children.push(o))),n=o}return o&&(o.value=r),o},e.prototype.getKey=function(){return this.key&&"-"!==this.key?this.key:this.getIndexInParent().toString()},e.prototype.getCurrentKeys=function(){var e=[];return this.parent&&(e=e.concat(this.parent.getCurrentKeys())),e.concat([this.key])},e.prototype.getIndexInParent=function(){if(this.parent)for(var e=this.parent.children,t=0,r=e.length;t<r;t++){var n=e[t];if(n&&n===this)return t}return-1},e.prototype.contains=function(t){if(t.constructor===Number){if(this.children.length>t){var r=this.children[t];return r||(this.children[t]=new e("-",null,this),r=this.children[t]),r}return null}if(this.getKey()===t)return this;if(!this.children||0===this.children.length)return null;for(var n=0;n<this.children.length;n++){var o=this.children[n];if(o&&o.contains(t))return o}return null},e.prototype.containPath=function(e){var t=this;return e.forEach(function(e){return t?(t=t.contains(e),t?void 0:null):null}),t},e.prototype.removeFromParent=function(){var e=this.getIndexInParent();this.parent&&this.parent.children.splice(e,1)},e.prototype.insertToFromParent=function(e){var t=this.getIndexInParent(),r=e;!this.parent||!this.parent.children||t<0||(this.parent.children.length<=e&&this.parent.addChild([e]),this.removeFromParent(),this.parent.children=this.parent.children.concat([]).splice(0,r-0).concat([this]).concat(this.parent.children.splice(r-0)))},e.prototype.forEach=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this.value=e(this)),this.children)for(var t=0,r=this.children.length;t<r;t++)this.children[t]&&(this.children[t].value=e(this.children[t]),this.children[t].forEach(e))},e}()},function(e,t,r){"use strict";var n=r(37),o=r(13);r.d(t,"a",function(){return n.a}),n.a.propTypes=Object.assign({},o.a)},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(40),o=r.n(n),a={schemaId:o.a.string.isRequired,uiSchema:o.a.object,parentKeys:o.a.array.isRequired,globalOptions:o.a.object.isRequired,ajv:o.a.object.isRequired,arrayIndex:o.a.number,arrayLevel:o.a.array,formItemData:o.a.any,formItemMeta:o.a.any,ArrayItemComponent:o.a.any}},function(e,t,r){e.exports=r(15)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),o=(r.n(n),r(4)),a=r(34),i=r(1),c=r(41),u=r(11),s=r(45),f=r(7),p={tempFactory:new n.BaseFactory,fieldFactory:new n.BaseFactory,widgetFactory:new n.BaseFactory};c.a.forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&p.fieldFactory.add(t,e[t])}),o.c.add("default",p),o.a.add(s.b,s.a.bind(s.a,o.a)),t.default={themeFactory:o.c,defaultTheme:p,schemaFormDec:s.a,TreeMap:u.a,reducerFactory:o.b,SchemaForm:a.a,hocFactory:o.a,schemaFormTypes:i.a,merge:f.a}},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(17),o=r(18),a=r(22),i=r(23),c=r(24),u=r(25),s=r(26),f=r(27),p=r(28),l=r(30),h=[n.a,o.a,a.a,i.a,c.a,u.a,s.a,f.a,p.a,l.a]},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(0),c=r.n(i),u=r(5),s=(r.n(u),this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r}),f=function(e){return function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return function(t){function r(e){n(this,r);var a=o(this,t.call(this,e)),i=e.uiSchema?Object.assign({},e.uiSchema):void 0;i&&(i.keys=i.originKeys);var c=new u.MergeLib(e.ajv,e.schemaId,i,e.uiSchemas);return a._mergeUiSchemaList=c.mergeUiSchemaList.map(function(e){return a.mergeKeys(e)}),a}return a(r,t),r.prototype.mergeKeys=function(e){var t=this.props.arrayLevel,r=void 0===t?[]:t,n=r.concat([]);return e=Object.assign({},e),e.originKeys=[].concat(e.keys),e.keys=e.keys.reverse().map(function(e){return"-"===e?n.pop():e}),e.keys.reverse(),e},r.prototype.render=function(){var t=this.props,r=(t.uiSchemas,t.uiSchema,s(t,["uiSchemas","uiSchema"]));return c.a.createElement(e,Object.assign({mergeSchemaList:this._mergeUiSchemaList},r))},r}(i.PureComponent)}}};t.a={name:"merge",hoc:f}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(6),c=r.n(i),u=r(0),s=r.n(u),f=r(5),p=(r.n(f),r(3)),l=r.n(p),h=r(21),y=r.n(h),m=r(1),d=r(7),b=r(4),v=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function c(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},g=function(e){return function(){return function(e){return function(t){function r(){return n(this,r),o(this,t.apply(this,arguments))}return a(r,t),r.prototype.render=function(){return s.a.createElement(e,Object.assign({getTitle:this.getTitle,getPathKeys:this.getPathKeys,getOptions:this.getOptions,normalizeDataPath:this.normalizeDataPath,getRequiredKeys:this.getRequiredKeys,getDefaultData:this.getDefaultData,getActions:this.getActions,getPathProps:this.getPathProps},this.props))},r.prototype.getPathProps=function(e,t){return Object.assign({},e,{uiSchema:Object.assign({},e.uiSchema,{keys:e.getPathKeys(e.uiSchema.keys,t)})})},r.prototype.getActions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=b.b.get(e.reducerKey||"schemaForm").actions;if(t)for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];r[n]=o.raw}return r},r.prototype.getRequiredKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};return t&&t.constructor===Array&&t.length?t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}):n=Object.assign({},e),r&&r.constructor===Array&&r.length&&r.forEach(function(e){n.hasOwnProperty(e)&&delete n[e]}),n},r.prototype.normalizeDataPath=function(e,t){var r=t.replace(/^\//g,"").split("/");return r=r.map(function(t,n){if(Number.isInteger(+t)){var o=r.slice(0,n);if(o.unshift(e),f.schemaKeysFactory.has(o.join("/"))){if("array"===f.schemaFieldFactory.get(f.schemaKeysFactory.get(o.join("/"))).type)return+t}}return t})},r.prototype.getOptions=function(e,t,r){var n=e.uiSchema,o=void 0===n?{}:n,a=e.globalOptions,i=o.options,c=o.type,u=void 0===c?"":c,s=[],f=function(e,t){e&&(l.a.Map.isMap(e)||(e=l.a.fromJS(e)),e.hasIn(t)&&s.push(e.getIn(t)))};f(a,[t,"default"]),f(a,[t,r]),f(a,[m.a.field,u.toString(),"options",t,r]),f(i,[t,r]);for(var h=arguments.length,y=Array(h>3?h-3:0),b=3;b<h;b++)y[b-3]=arguments[b];return s=s.concat(y),s.reverse().reduce(function(e,t){return t?(l.a.Map.isMap(t)||(t=Object(p.fromJS)(t)),Object(d.a)(t,e,{"*":"replace"})):e},Object(p.fromJS)({})).toJS()},r.prototype.getTitle=function(e){for(var t=e.uiSchema,r=e.arrayIndex,n=t.title,o=t.keys,a=arguments.length,i=Array(a>1?a-1:0),c=1;c<a;c++)i[c-1]=arguments[c];if(!n&&i&&i.length&&i.forEach(function(e){e&&!n&&e.get("title")&&(n=e.get("title"))}),void 0!==n)return n;if(o&&o.length){var u=[].concat(o),s=u.pop();return void 0!==s?s.toString():""}return r?r.toString():""},r.prototype.getPathKeys=function(e,t){var r=[""].concat(e.concat([""])),n=y()(t,r.join("/")).split("/");return n.shift(),n.length&&!n[n.length-1]&&n.pop(),n},r.prototype.getDefaultData=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return v(this,void 0,void 0,c.a.mark(function a(){var i,u,s,f;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={},u={},s=t.type,f=function(e){if(!o)return u.defaultData;var t=Object(d.a)(Object(p.fromJS)(u.defaultData),Object(p.fromJS)(e));return n?Object(d.a)(t,Object(p.fromJS)(n)):t.toJS()},a.prev=1,a.next=4,e.validate({type:"object",properties:{defaultData:t}},u);case 4:a.next=9;break;case 6:return a.prev=6,a.t0=a.catch(1),a.abrupt("return",r);case 9:a.prev=9,a.t1=s,a.next="object"===a.t1?13:"array"===a.t1?16:19;break;case 13:return u.defaultData||(u.defaultData=r||{}),u.defaultData=f(r||{}),a.abrupt("break",20);case 16:return u.defaultData||(u.defaultData=r||[]),u.defaultData=f(r||[]),a.abrupt("break",20);case 19:u.defaultData=r||u.defaultData;case 20:return a.finish(9);case 21:return a.abrupt("return",u.defaultData);case 22:case"end":return a.stop()}},a,this,[[1,6,9,21]])}))},r}(u.PureComponent)}}};t.a={name:"utils",hoc:g}},function(e,t,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(20),o)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";function r(e,t,r,n){var a=t&&t.prototype instanceof o?t:o,i=Object.create(a.prototype),c=new h(n||[]);return i._invoke=s(e,r,c),i}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function o(){}function a(){}function i(){}function c(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(r,o,a,i){var c=n(e[r],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&v.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,a,i)},function(e){t("throw",e,a,i)}):Promise.resolve(s).then(function(e){u.value=e,a(u)},i)}i(c.arg)}function r(e,r){function n(){return new Promise(function(n,o){t(e,r,n,o)})}return o=o?o.then(n,n):n()}var o;this._invoke=r}function s(e,t,r){var o=x;return function(a,i){if(o===E)throw new Error("Generator is already running");if(o===_){if("throw"===a)throw i;return m()}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=f(c,r);if(u){if(u===k)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===x)throw o=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=E;var s=n(e,t,r);if("normal"===s.type){if(o=r.done?_:P,s.arg===k)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=_,r.method="throw",r.arg=s.arg)}}}function f(e,t){var r=e.iterator[t.method];if(r===d){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=d,f(e,t),"throw"===t.method))return k;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var o=n(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,k;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=d),t.delegate=null,k):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,k)}function p(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(p,this),this.reset(!0)}function y(e){if(e){var t=e[O];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=d,t.done=!0,t};return n.next=n}}return{next:m}}function m(){return{value:d,done:!0}}var d,b=Object.prototype,v=b.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},O=g.iterator||"@@iterator",w=g.asyncIterator||"@@asyncIterator",j=g.toStringTag||"@@toStringTag",I="object"==typeof e,S=t.regeneratorRuntime;if(S)return void(I&&(e.exports=S));S=t.regeneratorRuntime=I?e.exports:{},S.wrap=r;var x="suspendedStart",P="suspendedYield",E="executing",_="completed",k={},C={};C[O]=function(){return this};var K=Object.getPrototypeOf,R=K&&K(K(y([])));R&&R!==b&&v.call(R,O)&&(C=R);var F=i.prototype=o.prototype=Object.create(C);a.prototype=F.constructor=i,i.constructor=a,i[j]=a.displayName="GeneratorFunction",S.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},S.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,j in e||(e[j]="GeneratorFunction")),e.prototype=Object.create(F),e},S.awrap=function(e){return{__await:e}},c(u.prototype),u.prototype[w]=function(){return this},S.AsyncIterator=u,S.async=function(e,t,n,o){var a=new u(r(e,t,n,o));return S.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},c(F),F[j]="Generator",F[O]=function(){return this},F.toString=function(){return"[object Generator]"},S.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},S.values=y,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=d)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=d),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var i=v.call(o,"catchLoc"),c=v.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,k):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),k},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),k}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;l(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=d),k}}}(function(){return this}()||Function("return this")())},function(e,t){e.exports=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(0),c=r.n(i),u=r(4),s=function(e){return function(){return function(e){return function(t){function r(){return n(this,r),o(this,t.apply(this,arguments))}return a(r,t),r.prototype.render=function(){var t=this.props.uiSchema.theme,r=void 0;if(!u.c.has(t||"default"))throw new Error("没有找到"+(t||"default")+"的样式！");return r=u.c.get(t||"default"),c.a.createElement(e,Object.assign({currentTheme:r},this.props))},r}(i.PureComponent)}}};t.a={name:"theme",hoc:s}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(0),c=r.n(i),u=function(e){return function(){return function(e){return function(t){function r(){return n(this,r),o(this,t.apply(this,arguments))}return a(r,t),r.prototype.render=function(){var t=this.props,r=t.currentTheme,n=(t.getOptions,t.uiSchema),o=n.field,a=n.widget,i=n.type,u=void 0,s=void 0,f=o||i;if(r.fieldFactory.has(f))u=r.fieldFactory.get(f);else{if(!r.fieldFactory.has("default"))return null;u=r.fieldFactory.get("default")}return r.widgetFactory.has(a||i)?s=r.widgetFactory.get(a||i):r.widgetFactory.has("default")&&(s=r.widgetFactory.get("default")),c.a.createElement(e,Object.assign({},this.props,{FieldComponent:u,WidgetComponent:s}))},r}(i.PureComponent)}}};t.a={name:"field",hoc:u}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(6),c=r.n(i),u=r(0),s=r.n(u),f=r(2),p=(r.n(f),r(4)),l=this,h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},m=this&&this.__metadata||function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function c(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},b=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r},v=function(e){return function(){var e=Object(f.compose)(Object(f.withHandlers)({addItem:function(e){return function(e,t){return d(l,void 0,void 0,c.a.mark(function r(){var n,o,a,i,u;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.uiSchema&&e.uiSchema.items){r.next=2;break}return r.abrupt("return");case 2:return n=e.uiSchema,o=n.items,a=n.keys,i=n.defaultData,r.next=5,e.getDefaultData(e.ajv,o,t,i,!0);case 5:u=r.sent,p.b.get(e.reducerKey||"schemaForm").actions.addItem({parentKeys:e.parentKeys,keys:a,data:u});case 7:case"end":return r.stop()}},r,this)}))}},removeItem:function(e){return function(t,r,n){p.b.get(e.reducerKey||"schemaForm").actions.removeItem({parentKeys:t,keys:r,index:n})}},moveItem:function(e){return function(t,r,n,o){p.b.get(e.reducerKey||"schemaForm").actions.moveToItem({parentKeys:t,keys:r,curIndex:n,toIndex:o})}},initArrayComponent:function(e){return function(e,t){var r=e.ArrayComponent,n=e.ArrayItemComponent,o=b(e,["ArrayComponent","ArrayItemComponent"]);return"array"===e.uiSchema.type?r?s.a.createElement(r,Object.assign({},o)):null:n?s.a.createElement(n,Object.assign({},o)):null}}})),t=function(t){var r=function(e){function r(t,a){n(this,r);var i=o(this,e.call(this,t,a));return i.initArrayComponents(),i}return a(r,e),r.prototype.initArrayComponents=function(){var e=this.props.getOptions,t=e(this.props,"hoc","array");t.ArrayComponent&&(this.ArrayComponent=t.ArrayComponent),t.ArrayItemComponent&&(this.ArrayItemComponent=t.ArrayItemComponent)},r.prototype.render=function(){var e={};return this.ArrayComponent&&(e.ArrayComponent=this.ArrayComponent),this.ArrayItemComponent&&(e.ArrayItemComponent=this.ArrayItemComponent),s.a.createElement(t,Object.assign({},this.props,e))},r}(u.PureComponent);return r=y([e,m("design:paramtypes",[Object,Object])],r)},r=function(t){var r=function(e){function r(){return n(this,r),o(this,e.apply(this,arguments))}return a(r,e),r.prototype.render=function(){return s.a.createElement(t,Object.assign({},this.props))},r}(s.a.PureComponent);return r=y([e],r)};return Object(f.branch)(function(e){var t=e.uiSchema;return"array"===(void 0===t?{type:""}:t).type},t,r)}};t.a={name:"array",hoc:v}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(6),c=r.n(i),u=r(0),s=r.n(u),f=r(2),p=(r.n(f),r(5)),l=(r.n(p),this),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},m=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function c(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},d=function(e){return function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){var r=function(e){function r(){return n(this,r),o(this,e.apply(this,arguments))}return a(r,e),r.prototype.render=function(){return s.a.createElement(t,Object.assign({},this.props))},r}(u.PureComponent);return r=y([Object(f.compose)(e.get("data")({root:!0}),Object(f.withHandlers)({validate:function(e){return function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(l,void 0,void 0,c.a.mark(function o(){var a,i,u,s,f,l,h,y,m,d,b;return c.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(a={dirty:!0,isValid:!1,isLoading:!1},i=t.uiSchema,u=t.reducerKey,s=t.parentKeys,f=t.ajv,l=t.getTitle,h=Object.assign({},i),y=setTimeout(function(){e.getActions(e).updateItemMeta({parentKeys:s,keys:h.keys,meta:{isLoading:!0,isValid:!1,errorText:!1}})},200),o.prev=4,m=void 0,h.schemaPath&&f.getSchema(h.schemaPath)?m=f.getSchema(h.schemaPath):h.$id?m=f.getSchema(h.$id):(d=Object.assign({},p.schemaFieldFactory.get(h.schemaPath)),delete d.$id,delete d.$ref,m=f.compile(d)),!e.formItemData){o.next=13;break}return o.next=10,m(r,void 0,void 0,void 0,e.formItemData.toJS());case 10:a.isValid=o.sent,o.next=16;break;case 13:return o.next=15,m(r);case 15:a.isValid=o.sent;case 16:if(a.isValid){o.next=20;break}throw b=new Error,b.errors=m.errors,b;case 20:o.next=25;break;case 22:o.prev=22,o.t0=o.catch(4),a.errorText=o.t0.errors?f.errorsText(o.t0.errors,{dataVar:l(t).toString()}):o.t0.message;case 25:return o.prev=25,clearTimeout(y),o.finish(25);case 28:return o.abrupt("return",Object.assign({},n,a));case 29:case"end":return o.stop()}},o,this,[[4,22,25,28]])}))}}}),e.get("resetKey")({excludeKeys:["formItemData"]}),Object(f.withHandlers)({updateItemData:function(e){return function(t,r,n,o){var a=r.parentKeys,i=r.uiSchema;return e.getActions(e,t).updateItemData({parentKeys:a,keys:i.keys,data:n,meta:o})}},updateItemMeta:function(e){return function(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return m(l,void 0,void 0,c.a.mark(function i(){var u,s;return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(u=r.parentKeys,s=r.uiSchema,i.t0=e.getActions(e,t),i.t1=u,i.t2=s.keys,i.t3=o,i.t3){i.next=9;break}return i.next=8,e.validate(r,n);case 8:i.t3=i.sent;case 9:return i.t4=i.t3,i.t5=a,i.t6={parentKeys:i.t1,keys:i.t2,meta:i.t4,noChange:i.t5},i.abrupt("return",i.t0.updateItemMeta.call(i.t0,i.t6));case 13:case"end":return i.stop()}},i,this)}))}},removeItemData:function(e){return function(t,r){var n=r.parentKeys,o=r.uiSchema,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.getActions(e,t).removeItemData({parentKeys:n,keys:o.keys,meta:a})}},combineActions:function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.getActions(e).combineActions(r)}}}),Object(f.withHandlers)({updateItemData:function(e){return e.updateItemData.bind(null,!1)},updateItemMeta:function(e){return e.updateItemMeta.bind(null,!1)},removeItemData:function(e){return e.removeItemData.bind(null,!1)},updateItemDataRaw:function(e){return e.updateItemData.bind(null,!0)},updateItemMetaRaw:function(e){return e.updateItemMeta.bind(null,!0)},removeItemDataRaw:function(e){return e.removeItemData.bind(null,!0)}}))],r)}}};t.a={name:"validate",hoc:d}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(0),c=r.n(i),u=r(2),s=(r.n(u),r(3)),f=r.n(s),p=r(1),l=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(r){return function(i){function s(){return n(this,s),o(this,i.apply(this,arguments))}return a(s,i),s.prototype.render=function(){var n=this.props,o=n.uiSchema,a=n.getOptions,i=o.type,s=o.field,l=a(this.props,p.a.field,s||i,f.a.fromJS(o.hocs?{hocs:o.hocs}:{}),f.a.fromJS(t||{})),h=l.hocs||["utils","theme","field","validate","array","temp"],y=u.compose.apply(void 0,[].concat(h).map(function(t){return"string"!=typeof t?t:e.get(t)()}))(r);return c.a.createElement(y,Object.assign({},this.props))},s}(i.PureComponent)}}};t.a={name:"make",hoc:l}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(0),c=r.n(i),u=r(2),s=(r.n(u),r(1)),f=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tempField:"temps",templates:[]};return function(r){return function(i){function f(){return n(this,f),o(this,i.apply(this,arguments))}return a(f,i),f.prototype.render=function(){var t=this,n=this.props,o=n.uiSchema,a=n.getOptions,i=n.reducerKey;o.options,o.keys;return this.getTemplates().reduce(function(r,n){var o=n.key,f=n.Temp,p=a(t.props,s.a.template,o),l=u.compose.apply(void 0,[e.get("utils")()].concat(p.tempHocs||[]))(f);return c.a.createElement(l,{tempKey:o,ajv:t.props.ajv,uiSchema:t.props.uiSchema,schemaId:t.props.schemaId,arrayLevel:t.props.arrayLevel,reducerKey:i,arrayIndex:t.props.arrayIndex,globalOptions:t.props.globalOptions,ArrayComponent:t.props.ArrayComponent,ArrayItemComponent:t.props.ArrayItemComponent,initArrayComponent:t.props.initArrayComponent,parentKeys:t.props.parentKeys,children:r})},c.a.createElement(r,Object.assign({},this.props)))},f.prototype.getTemplates=function(){var e=this.props,r=e.uiSchema,n=e.currentTheme,o=e.getOptions,a=(r.keys,r.type),i=r.temps,c=o(this.props,s.a.field,a),u=[],f=void 0;f=i||(t.templates&&t.templates.length>0?t.templates:c[t.tempField]||"default");return function e(t){switch(t.constructor){case String:n.tempFactory.has(t)?u.push({key:t,Temp:n.tempFactory.get(t)}):console.error("不存在"+t+"的temp！");break;case Object:u.push({key:t.name,Temp:t});break;case Array:[].concat(f).reverse().forEach(function(t,r){e(t)})}}(f),u},f}(i.PureComponent)}}};t.a={name:"temp",hoc:f}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(0),c=r.n(i),u=r(9),s=(r.n(u),r(29)),f=(r.n(s),r(3)),p=(r.n(f),r(1)),l=Object(s.createSelectorCreator)(s.defaultMemoize,f.is),h="data",y=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:!0},t=function(t,r,n){return l([function(o){var a=[].concat(r,t,["data"]);if(e.root)return o.getIn(a);if(a=[].concat(a,n),e.data&&o.hasIn(a)){var i=o.getIn(a);if(void 0!==i)return e.dataLength?i.size:i}},function(o){var a=[].concat(r,t,["meta"]);if(e.meta&&o.hasIn(a)){var i=o.getIn(a),c=i.containPath([].concat(n));if(c&&c.value)return e.metaKeys?c.value.filter(function(t,r){return e.metaKeys.indexOf(r)>=0}):c.value}},function(o){if(!e.treeNode)return null;var a=[].concat(r,t,["meta"]),i=o.getIn(a),c=i.containPath([].concat(n));return c||i.addChild([].concat(n))}],function(e,t,r){var n={};return void 0!==e&&null!==e&&(n.formItemData=e),void 0!==t&&null!==t&&(n.formItemMeta=t),void 0!==r&&null!==r&&(n.formItemNode=r),n})};return function(e){return function(r){function i(a){n(this,i);var c=o(this,r.call(this,a));c.ComponentWithHoc=e;var s=c.props,f=(s.uiSchema,s.getOptions),l=c.props.uiSchema||{},y=l.keys,m=void 0===y?[]:y,d=f(c.props,p.a.hoc,h);d.rootReducerKey&&d.rootReducerKey.constructor===Array||console.error("dataHoc missing property rootReducerKey.should be a Array.");var b=Object(u.connect)(t(c.props.parentKeys,d.rootReducerKey,m)),v=b(e);return c.ComponentWithHoc=v,c}return a(i,r),i.prototype.render=function(){var e=this.ComponentWithHoc;return c.a.createElement(e,Object.assign({},this.props))},i}(i.PureComponent)}}};t.a={name:h,hoc:y}},function(e,t){e.exports=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(0),c=r.n(i),u=r(3),s=(r.n(u),r(1)),f=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{excludeKeys:[],includeKeys:[]};return function(t){return function(r){function i(){return n(this,i),o(this,r.apply(this,arguments))}return a(i,r),i.prototype.render=function(){var r=this.props,n=r.getOptions,o=r.getRequiredKeys,a=n(this.props,s.a.hoc,"resetKey",Object(u.fromJS)(e||{})),i=o(this.props,a.includeKeys,a.excludeKeys);return c.a.createElement(t,Object.assign({},i))},i}(c.a.PureComponent)}}};t.a={name:"resetKey",hoc:f}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(3),o=(r.n(n),r(32)),a=new o.a(Object(n.fromJS)({}))},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",function(){return p});var o=r(33),a=(r.n(o),r(3)),i=(r.n(a),r(10)),c=r(11),u=r(7),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=function(e,t){if(e.hasIn(t))return e;for(var r=0,n=t.length;r<n;r++){var o=[].concat(t).splice(0,r+1);if(e.hasIn(o)){if(r<n){var i=e.getIn(o);a.Map.isMap(i)||a.List.isList(i)||(e=t[r+1].constructor===Number?e.setIn(o,Object(a.List)()):e.setIn(o,Object(a.Map)()))}}else o.pop(),e.hasIn(o)||(e=t[r].constructor===Number?e.setIn(o,Object(a.List)()):e.setIn(o,Object(a.Map)()))}return e},p=function(){function e(t){n(this,e),this.initialState=t,this.createForm=Object(o.createAction)(""),this.updateItemData=Object(o.createAction)(""),this.updateItemMeta=Object(o.createAction)(""),this.addItem=Object(o.createAction)(""),this.removeItem=Object(o.createAction)(""),this.moveToItem=Object(o.createAction)(""),this.removeItemData=Object(o.createAction)(""),this.combineActions=Object(o.createAction)(""),this.removeForm=Object(o.createAction)("")}return e.prototype.init=function(e){for(var t in this.actions)if(this.actions.hasOwnProperty(t)){var r=this.actions[t];r.assigned()||r.assignTo(e)}},e.prototype.removeFormHandle=function(e,t){var r=t;return e.hasIn(r)?e.removeIn(r):e},e.prototype.combineActionsHandle=function(e,t){var r=this;return e=t.reduce(function(e,t){return r.reducer(e,t)},e)},e.prototype.removeItemDataMetaHandle=function(e,t){var r=t.parentKeys,n=t.keys,o=t.meta,a=r.concat([i.a].concat(n)),c=r.concat([i.b]),u=e.getIn(c),s=u.containPath(n);return e=f(e,a),e.hasIn(a)&&(e=e.removeIn(a)),s&&o&&s.removeFromParent(),e},e.prototype.createFormHandle=function(e,t){var r=t.key,n=t.data;e.has(r)&&(e=e.remove(r));var o=new c.a(r,Object(a.fromJS)({})),i=Object(a.Map)({meta:o,data:Object(a.fromJS)(n)});return e.set(r,i)},e.prototype.updateItemDataHandle=function(e,t){var r=t.parentKeys,n=t.keys,o=t.data,c=t.meta,u=r.concat([i.a].concat(n));return e=f(e,u),e=e.setIn(u,Object(a.fromJS)(o)),c&&(e=this.updateItemMetaHandle(e,{parentKeys:r,keys:n,meta:c})),e},e.prototype.addItemDataHandle=function(e,t){var r=t.parentKeys,n=t.keys,o=t.data,c=r.concat([i.a].concat(n)),u=r.concat([i.b]),s=e.getIn(u),p=s.containPath(n),l=void 0;return e=f(e,c),l=e.getIn(c)||Object(a.List)(),l=l.push(Object(a.fromJS)(o)),p&&p.value&&(p.value=p.value.merge({collapsing:!1})),e.setIn(c,l)},e.prototype.removeItemHandle=function(e,t){var r=t.parentKeys,n=t.keys,o=t.index,c=r.concat([i.a].concat(n)),u=r.concat([i.b]),s=e.getIn(u),p=s.addChild(n.concat([o])),l=void 0;return e=f(e,c),(l=e.getIn(c))&&a.List.isList(l)?(p&&p.removeFromParent(),e.setIn(c,l.remove(o))):e},e.prototype.moveItemHandle=function(e,t){var r=t.parentKeys,n=t.keys,o=t.curIndex,a=t.toIndex,c=r.concat([i.a].concat(n)),u=r.concat([i.b]),s=e.getIn(u),p=(e.getIn(c),e.getIn(c)),l=s.containPath(n.concat([o])),h=s.containPath(n.concat([a]));if(e=f(e,c),!p||a<0)return e;var y=p.get(o);return p=p.remove(o),p=p.insert(a-0,y),l?l.insertToFromParent(a):h&&h.insertToFromParent(o),e.setIn(c,p)},e.prototype.updateItemMetaHandle=function(e,t){var r=t.parentKeys,n=t.keys,o=t.meta,s=t.noChange,f=r.concat([i.b]),p=e.getIn(f),l=p.containPath(n),h=l?l.value:null;if(l||(l=p.addChild(n)),l&&(l.value=h?Object(u.a)(l.value,Object(a.fromJS)(o),{"*":"replace"}):Object(a.fromJS)(o)),s)return e;var y=new c.a(p.getKey(),p.value);return y.children=p.children,e.setIn(f,y)},s(e,[{key:"actions",get:function(){return{createForm:this.createForm,updateItemData:this.updateItemData,updateItemMeta:this.updateItemMeta,addItem:this.addItem,removeItem:this.removeItem,moveToItem:this.moveToItem,removeItemData:this.removeItemData,combineActions:this.combineActions,removeForm:this.removeForm}}},{key:"reducer",get:function(){var e;return Object(o.createReducer)((e={},e[this.createForm]=this.createFormHandle.bind(this),e[this.updateItemData]=this.updateItemDataHandle.bind(this),e[this.updateItemMeta]=this.updateItemMetaHandle.bind(this),e[this.addItem]=this.addItemDataHandle.bind(this),e[this.removeItem]=this.removeItemHandle.bind(this),e[this.moveToItem]=this.moveItemHandle.bind(this),e[this.removeItemData]=this.removeItemDataMetaHandle.bind(this),e[this.combineActions]=this.combineActionsHandle.bind(this),e[this.removeForm]=this.removeFormHandle.bind(this),e),this.initialState)}}]),e}()},function(e,t){e.exports=c},function(e,t,r){"use strict";var n=r(8);r.d(t,"a",function(){return n.a});r(12)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.d(t,"a",function(){return h});var i=r(0),c=r.n(i),u=r(36),s=r(12),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},l=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r},h=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.schemaId,r=e.mergeSchemaList,n=e.arrayLevel,o=e.RootComponent,a=e.children,i=l(e,["schemaId","mergeSchemaList","arrayLevel","RootComponent","children"]),u=r?r.map(function(e,r){var o=n?n.concat([]):[];return c.a.createElement(s.a,Object.assign({key:r},i,{schemaId:t,uiSchema:e,arrayLevel:o}))}):[];return o?c.a.createElement(o,null,u,a):c.a.createElement("div",null,u,a)},t}(i.PureComponent);h=p([u.a],h)},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(2),o=(r.n(n),r(4)),a=Object(n.compose)(Object(n.shouldUpdate)(function(){return!1}),o.a.get("utils")(),o.a.get("merge")())},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.d(t,"a",function(){return h});var i=r(0),c=r.n(i),u=r(38),s=(r.n(u),r(39)),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},l=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r},h=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.FieldComponent,r=e.uiSchema,n=l(e,["FieldComponent","uiSchema"]),o=n.getOptions(this.props,"field",r.field||r.type),a=t;return t?(o.fieldHocs&&o.fieldHocs.length&&(a=u.compose.apply(void 0,o.fieldHocs||[])(t)),c.a.createElement(a,Object.assign({key:r.keys.join("formItem"),uiSchema:r},n))):null},t}(i.PureComponent);h=p([s.a],h)},function(e,t){e.exports=u},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(2),o=(r.n(n),r(4)),a=Object(n.compose)(o.a.get("utils")(),o.a.get("make")())},function(e,t){e.exports=s},function(e,t,r){"use strict";var n=r(42),o=r(43),a=r(44);t.a=[n.a,o.a,a.a]},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c=r(0),u=r.n(c),s=r(2),f=(r.n(s),r(1)),p=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r},l=function(e){function t(r,a){return n(this,t),o(this,e.call(this,r,a))}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.WidgetComponent,r=(e.FieldComponent,e.formItemMeta,e.formItemData,p(e,["WidgetComponent","FieldComponent","formItemMeta","formItemData"])),n=r.getOptions(this.props,f.a.field,"normal"),o=r.uiSchema.keys,a=t;return t&&o?(n.widgetHocs&&n.widgetHocs.length&&(a=s.compose.apply(void 0,n.widgetHocs)(t)),u.a.createElement(a,Object.assign({key:o.join(".")},r))):null},t}(c.PureComponent);t.a=(i={},i.normal=l,i.default=l,i)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c=r(0),u=r.n(c),s=r(8),f=r(1),p=r(2),l=(r.n(p),function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.arrayIndex,r=e.arrayLevel,n=e.parentKeys,o=e.globalOptions,a=e.ajv,i=(e.schemaId,e.getOptions),c=e.reducerKey,l=e.uiSchema,h=i(this.props,f.a.field,"object"),y=s.a;return null!==l.children&&l.schemaPath?(h.formHocs&&h.formHocs.constructor===Array&&(y=p.compose.apply(void 0,h.formHocs)(s.a)),u.a.createElement(y,{arrayIndex:t,arrayLevel:r,RootComponent:h.Root,reducerKey:c,schemaId:l.schemaPath,uiSchemas:l.children||["*"],uiSchema:l,parentKeys:n,globalOptions:o,ajv:a})):null},t}(c.PureComponent));t.a=(i={},i.object=l,i)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c=r(0),u=r.n(c),s=r(2),f=(r.n(s),r(1)),p=r(8),l={width:"100%",height:"100%"},h=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){return u.a.createElement("div",{style:l},this.props.children)},t}(u.a.PureComponent),y=function(e){function t(r){n(this,t);var a=o(this,e.call(this,r));return a.SchemaFormWithHoc=h,a.initComponent(),a}return a(t,e),t.prototype.initComponent=function(){var e=this.props,t=(e.uiSchema,e.formItemData,e.getOptions),r=t(this.props,f.a.field,"array"),n=null,o=null;r.formHocs&&r.formHocs.constructor===Array&&(n=s.compose.apply(void 0,r.formHocs)(r.ArrayFieldComponent||h)),r.formItemHocs&&r.formItemHocs.constructor===Array&&(o=s.compose.apply(void 0,r.formItemHocs)(p.a)),this.SchemaFormWithHoc=n,this.SchemaFormItemWithHoc=o},t.prototype.renderItem=function(e){var t=this.props,r=t.parentKeys,n=t.globalOptions,o=t.getOptions,a=t.arrayLevel,i=void 0===a?[]:a,c=(t.getRequiredKeys,t.ajv),s=t.reducerKey,l=t.ArrayItemComponent,h=this.props.uiSchema,y=o(this.props,f.a.field,"array"),m=this.SchemaFormItemWithHoc||p.a;return null!==h.children&&h.schemaPath?u.a.createElement(m,{key:e,arrayIndex:e,uiSchema:h,RootComponent:y.Root,ArrayItemComponent:l,arrayLevel:i.concat([e]),reducerKey:s,schemaId:h.schemaPath,uiSchemas:h.children||["-"],parentKeys:r,globalOptions:n,ajv:c}):null},t.prototype.render=function(){for(var e=this.props,t=(e.uiSchema,e.formItemData),r=e.getOptions,n=e.getRequiredKeys,o=[],a=r(this.props,f.a.field,"array"),i=this.SchemaFormWithHoc,c=a.fieldIncludeKeys,s=a.fieldExcludeKeys,p=n(this.props,c,s),l=0;l<+t;l++)o.push(this.renderItem(l));return u.a.createElement(i,Object.assign({children:o},p))},t}(c.PureComponent);t.a=(i={},i.array=y,i)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.d(t,"b",function(){return j});var i=r(6),c=r.n(i),u=r(0),s=r.n(u),f=r(2),p=(r.n(f),r(9)),l=(r.n(p),r(3)),h=(r.n(l),r(46)),y=(r.n(h),r(1)),m=r(4),d=r(10),b=this,v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},O=this&&this.__metadata||function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},w=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function c(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},j="schemaFormDec";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rootReducerKey:[],parentKeys:[]};return function(t){var r=function(r){function i(e){n(this,i);var t=o(this,r.call(this,e));return t._validateAll=e.validateAll.bind(t),e.resetForm(),t}return a(i,r),i.prototype.render=function(){var r=this.props,n=(r.errors,r.isValid,r.isValidating,r.getRequiredKeys),o=r.getOptions,a=r.schemaId,i=o(this.props,y.a.hoc,j,Object(l.fromJS)(e||{})),c=n(this.props,i.hocIncludeKeys,i.hocExcludeKeys);return s.a.createElement(t,Object.assign({validateAll:this._validateAll,parentKeys:e.parentKeys,schemaId:a},c))},i}(u.PureComponent);return r=g([Object(f.compose)(m.a.get("utils")(),Object(p.connect)(function(t){var r=e.rootReducerKey.concat(e.parentKeys),n=r.concat([d.a]),o=r.concat([d.b]),a=t.getIn(o);return{data:t.getIn(n),root:a,isValid:!a||a.value.get("isValid"),errors:a?a.value.get("errors"):null,isValidating:!!a&&a.value.get("isLoading")}}),Object(f.withHandlers)({validateAll:function(t){var r=t.getActions(t),n=r.updateItemMeta,o=void 0;return function(r){return w(b,void 0,void 0,c.a.mark(function r(){var a,i,u,s,f,p,y;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t.root,i=t.ajv,u=t.data,s=t.ajv.getSchema(t.schemaId),f=Object(l.fromJS)({dirty:!0,isValid:!0,isLoading:!0}),p=Object(l.fromJS)({isLoading:!1,dirty:!0}),y=t.normalizeDataPath,a){r.next=3;break}return r.abrupt("return");case 3:if(s){r.next=5;break}throw new Error("没有找到对应的"+t.schemaId+";");case 5:return r.prev=5,a.forEach(function(e){return e.value?e.value.merge(f):f},!0),o=setTimeout(function(){n({parentKeys:e.parentKeys,keys:[],meta:a.value})},200),(l.Map.isMap(u)||l.List.isList(u))&&(u=u.toJS()),i.errors=null,r.next=12,s(u);case 12:if(r.sent){r.next=14;break}throw new h.ValidationError(s.errors.concat(i.errors||[]));case 14:a.value=a.value.merge({isValid:!0}),n({parentKeys:e.parentKeys,keys:[],meta:a.value}),r.next=24;break;case 18:if(r.prev=18,r.t0=r.catch(5),r.t0 instanceof h.ValidationError){r.next=22;break}return r.abrupt("return",{isValid:!1,errMsg:r.t0.message});case 22:r.t0.errors.forEach(function(e){var r=a.getCurrentKeys().concat(y(t.schemaId,e.dataPath)),n=a.containPath(r);n||(n=a.addChild(r,Object(l.fromJS)({}))),n&&(n.value=n.value.merge(p).merge({isValid:!1,errorText:r.pop()+" "+e.message}))}),a.value=a.value.merge({isValid:!1,errors:r.t0.errors});case 24:return r.prev=24,clearTimeout(o),a.forEach(function(e){return e.value?e.value.merge(p):e.value},!0),n({parentKeys:e.parentKeys,keys:[],meta:a.value}),r.finish(24);case 29:return r.abrupt("return",{isValid:a.value.get("isValid"),data:u});case 30:case"end":return r.stop()}},r,this,[[5,18,24,29]])}))}},resetForm:function(e){return function(){var t=e.formKey,r=e.shouldResetForm,n=(e.reducerKey,e.initData),o=void 0===n?{}:n;if(t&&!1!==r){var a=e.getActions(e),i=a.createForm;i&&i({key:t,data:o})}}}})),O("design:paramtypes",[Object])],r)}}},function(e,t){e.exports=f}]).default});
//# sourceMappingURL=index.js.map