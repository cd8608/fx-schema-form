!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("recompose"),require("immutable"),require("fx-schema-form-core"),require("react-redux"),require("resolve-pathname"),require("reselect"),require("redux-act"),require("redux"),require("prop-types"),require("ajv")):"function"==typeof define&&define.amd?define("SFR",["react","recompose","immutable","fx-schema-form-core","react-redux","resolve-pathname","reselect","redux-act","redux","prop-typese","ajv"],t):"object"==typeof exports?exports.SFR=t(require("react"),require("recompose"),require("immutable"),require("fx-schema-form-core"),require("react-redux"),require("resolve-pathname"),require("reselect"),require("redux-act"),require("redux"),require("prop-types"),require("ajv")):e.SFR=t(e.React,e.recompose,e.Immutable,e.SFC,e["react-redux"],e["resolve-pathname"],e.reselect,e["redux-act"],e.Redux,e["prop-types"],e.Ajv)}("undefined"!=typeof self?self:this,function(e,t,r,n,o,a,i,c,s,u,p){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=13)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";t.d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r},t.b=function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},t.c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},t.a=function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function c(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,c)}s((n=n.apply(e,t||[])).next())})};Object.setPrototypeOf||Array;Object.assign},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={hoc:"hoc",widget:"widget",template:"temp",field:"field"}},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return c}),r.d(t,"c",function(){return s});var n=r(6),o=(r.n(n),r(15)),a=r(29),i=new n.BaseFactory,c=new n.BaseFactory,s=new n.BaseFactory;o.a.forEach(function(e){c.add(e.name,e.hoc(c))}),i.add("schemaForm",a.a)},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){e.exports=r(18)},function(e,t,r){"use strict";var n=r(34),o=r(12);r.d(t,"a",function(){return n.a}),n.a.propTypes=Object.assign({},o.a)},function(e,t){e.exports=o},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t,this.value=r,this.parent=n,this.children=[]}return e.prototype.addChild=function(t,r){var n=this,o=null;if(!t.length)return this;for(t=[].concat(t);t.length;){var a=t.shift(),i=a.constructor===Number;(o=n.contains(a))||(i?(o=new e("-",null,n),n.children[a]=o):(o=new e(a.toString(),null,n),n.children.push(o))),n=o}return o&&(o.value=r),o},e.prototype.getKey=function(){return this.key&&"-"!==this.key?this.key:this.getIndexInParent().toString()},e.prototype.getCurrentKeys=function(){var e=[];return this.parent&&(e=e.concat(this.parent.getCurrentKeys())),e.concat([this.key])},e.prototype.getIndexInParent=function(){if(this.parent)for(var e=this.parent.children,t=0,r=e.length;t<r;t++){var n=e[t];if(n&&n===this)return t}return-1},e.prototype.contains=function(t){if(t.constructor===Number){if(this.children.length>t){var r=this.children[t];return r||(this.children[t]=new e("-",null,this),r=this.children[t]),r}return null}if(this.getKey()===t)return this;if(!this.children||0===this.children.length)return null;for(var n=0;n<this.children.length;n++){var o=this.children[n];if(o&&o.contains(t))return o}return null},e.prototype.containPath=function(e){var t=this;return e.forEach(function(e){return t&&(t=t.contains(e))?void 0:null}),t},e.prototype.removeFromParent=function(){var e=this.getIndexInParent();this.parent&&this.parent.children.splice(e,1)},e.prototype.insertToFromParent=function(e){var t=this.getIndexInParent(),r=e;!this.parent||!this.parent.children||t<0||(this.parent.children.length<=e&&this.parent.addChild([e]),this.removeFromParent(),this.parent.children=this.parent.children.concat([]).splice(0,r-0).concat([this]).concat(this.parent.children.splice(r-0)))},e.prototype.forEach=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this.value=e(this)),this.children)for(var t=0,r=this.children.length;t<r;t++)this.children[t]&&(this.children[t].value=e(this.children[t]),this.children[t].forEach(e))},e}()},function(e,t,r){"use strict";var n=r(36),o=r(12);r.d(t,"a",function(){return n.a}),n.a.propTypes=Object.assign({},o.a)},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(39),o=r.n(n),a={schemaId:o.a.string.isRequired,uiSchema:o.a.object,parentKeys:o.a.array.isRequired,globalOptions:o.a.object.isRequired,ajv:o.a.object.isRequired,arrayIndex:o.a.number,arrayLevel:o.a.array,formItemData:o.a.any,formItemMeta:o.a.any,ArrayItemComponent:o.a.any}},function(e,t,r){e.exports=r(14)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),o=(r.n(n),r(4)),a=r(33),i=r(3),c=r(40),s=r(10),u=r(44),p={tempFactory:new n.BaseFactory,fieldFactory:new n.BaseFactory,widgetFactory:new n.BaseFactory};c.a.forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&p.fieldFactory.add(t,e[t])}),o.c.add("default",p),o.a.add("schemaFormDec",u.a.bind(u.a,o.a)),t.default={themeFactory:o.c,defaultTheme:p,schemaFormDec:u.a,TreeMap:s.a,reducerFactory:o.b,SchemaForm:a.a,hocFactory:o.a,schemaFormTypes:i.a}},function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r(16),o=r(17),a=r(21),i=r(22),c=r(23),s=r(24),u=r(25),p=r(26),f=r(27),l=[n.a,o.a,a.a,i.a,c.a,s.a,u.a,p.a,f.a]},function(e,t,r){"use strict";var n=r(2),o=r(0),a=r.n(o),i=r(6);r.n(i);t.a={name:"merge",hoc:function(e){return function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],function(e){return function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,e)),o=e.uiSchema?Object.assign({},e.uiSchema):void 0;o&&(o.keys=o.originKeys);var a=new i.MergeLib(e.ajv,e.schemaId,o,e.uiSchemas);return n._mergeUiSchemaList=a.mergeUiSchemaList.map(function(e){return n.mergeKeys(e)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.mergeKeys=function(e){var t=this.props.arrayLevel,r=(void 0===t?[]:t).concat([]);return(e=Object.assign({},e)).originKeys=[].concat(e.keys),e.keys=e.keys.reverse().map(function(e){return"-"===e?r.pop():e}),e.keys.reverse(),e},r.prototype.render=function(){var t=this.props,r=(t.uiSchemas,t.uiSchema,n.d(t,["uiSchemas","uiSchema"]));return a.a.createElement(e,Object.assign({mergeSchemaList:this._mergeUiSchemaList},r))},r}(o.PureComponent)}}}}},function(e,t,r){"use strict";var n=r(7),o=r.n(n),a=r(2),i=r(0),c=r.n(i),s=r(6),u=(r.n(s),r(5)),p=r.n(u),f=r(20),l=r.n(f),h=r(3);t.a={name:"utils",hoc:function(e){return function(){return function(e){return function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.render=function(){return c.a.createElement(e,Object.assign({getTitle:this.getTitle,getPathKeys:this.getPathKeys,getOptions:this.getOptions,normalizeDataPath:this.normalizeDataPath,getRequiredKeys:this.getRequiredKeys,getDefaultData:this.getDefaultData},this.props))},r.prototype.getRequiredKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};return t&&t.constructor===Array&&t.length?t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}):n=Object.assign({},e),r&&r.constructor===Array&&r.length&&r.forEach(function(e){n.hasOwnProperty(e)&&delete n[e]}),n},r.prototype.normalizeDataPath=function(e,t){var r=t.replace(/^\//g,"").split("/");return r=r.map(function(t,n){if(Number.isInteger(+t)){var o=r.slice(0,n);if(o.unshift(e),s.schemaKeysFactory.has(o.join("/"))&&"array"===s.schemaFieldFactory.get(s.schemaKeysFactory.get(o.join("/"))).type)return+t}return t})},r.prototype.getOptions=function(e,t,r){var n=e.uiSchema,o=void 0===n?{}:n,a=e.globalOptions,i=o.options,c=o.type,s=void 0===c?"":c,u=[],f=function(e,t){e&&(p.a.Map.isMap(e)||(e=p.a.fromJS(e)),e.hasIn(t)&&u.push(e.getIn(t)))};f(a,[t,"default"]),f(a,[t,r]),f(a,[h.a.field,s.toString(),"options",t,r]),f(i,[t,r]);for(var l=arguments.length,m=Array(l>3?l-3:0),y=3;y<l;y++)m[y-3]=arguments[y];return(u=u.concat(m)).reverse().reduce(function(e,t){return t?(p.a.Map.isMap(t)||(t=p.a.fromJS(t)),t.merge(e)):e},p.a.fromJS({})).toJS()},r.prototype.getTitle=function(e){for(var t=e.uiSchema,r=t.title,n=t.keys,o=arguments.length,a=Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];if(!r&&a&&a.length&&a.forEach(function(e){e&&!r&&e.get("title")&&(r=e.get("title"))}),void 0!==r)return r;if(n&&n.length){var c=[].concat(n).pop();return void 0!==c?c.toString():""}return e.arrayIndex?e.arrayIndex.toString():""},r.prototype.getPathKeys=function(e,t){var r=[""].concat(e.concat([""])),n=l()(t,r.join("/")).split("/");return n.shift(),n.length&&!n[n.length-1]&&n.pop(),n},r.prototype.getDefaultData=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return a.a(this,void 0,void 0,o.a.mark(function a(){var i,c,s;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i={},c=t.type,s=function(e){return n?"object"===c?p.a.fromJS({}).merge(i.defaultData).merge(e).toJS():p.a.fromJS([]).merge(i.defaultData).merge(e).toJS():i.defaultData},o.prev=1,o.next=4,e.validate({type:"object",properties:{defaultData:t}},i);case 4:o.next=10;break;case 6:return o.prev=6,o.t0=o.catch(1),console.log(o.t0),o.abrupt("return",r);case 10:o.prev=10,o.t1=c,o.next="object"===o.t1?14:"array"===o.t1?17:20;break;case 14:return i.defaultData||(i.defaultData=r||{}),i.defaultData=s(r||{}),o.abrupt("break",21);case 17:return i.defaultData||(i.defaultData=r||[]),i.defaultData=s(r||[]),o.abrupt("break",21);case 20:i.defaultData=r||i.defaultData;case 21:return o.finish(10);case 22:return o.abrupt("return",i.defaultData);case 23:case"end":return o.stop()}},a,this,[[1,6,10,22]])}))},r}(i.PureComponent)}}}}},function(e,t,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(19),o)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag",u="object"==typeof e,p=t.regeneratorRuntime;if(p)u&&(e.exports=p);else{(p=t.regeneratorRuntime=u?e.exports:{}).wrap=w;var f="suspendedStart",l="suspendedYield",h="executing",m="completed",y={},d={};d[i]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(F([])));b&&b!==n&&o.call(b,i)&&(d=b);var g=x.prototype=j.prototype=Object.create(d);I.prototype=g.constructor=x,x.constructor=I,x[s]=I.displayName="GeneratorFunction",p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===I||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(g),e},p.awrap=function(e){return{__await:e}},S(E.prototype),E.prototype[c]=function(){return this},p.AsyncIterator=E,p.async=function(e,t,r,n){var o=new E(w(e,t,r,n));return p.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},S(g),g[s]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=F,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return c.type="throw",c.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:F(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function w(e,t,r,n){var o=t&&t.prototype instanceof j?t:j,a=Object.create(o.prototype),i=new _(n||[]);return a._invoke=function(e,t,r){var n=f;return function(o,a){if(n===h)throw new Error("Generator is already running");if(n===m){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=P(i,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var s=O(e,t,r);if("normal"===s.type){if(n=r.done?m:l,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=m,r.method="throw",r.arg=s.arg)}}}(e,r,i),a}function O(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function j(){}function I(){}function x(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(e){var t;this._invoke=function(r,n){function a(){return new Promise(function(t,a){!function t(r,n,a,i){var c=O(e[r],e,n);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==typeof u&&o.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,a,i)},function(e){t("throw",e,a,i)}):Promise.resolve(u).then(function(e){s.value=e,a(s)},i)}i(c.arg)}(r,n,t,a)})}return t=t?t.then(a,a):a()}}function P(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,P(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=O(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,y;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,y):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function K(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(K,this),this.reset(!0)}function F(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t){e.exports=a},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(4);t.a={name:"theme",hoc:function(e){return function(){return function(e){return function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.render=function(){var t=this.props.uiSchema.theme,r=void 0;if(!a.c.has(t||"default"))throw new Error("没有找到"+(t||"default")+"的样式！");return r=a.c.get(t||"default"),o.a.createElement(e,Object.assign({currentTheme:r},this.props))},r}(n.PureComponent)}}}}},function(e,t,r){"use strict";var n=r(0),o=r.n(n);t.a={name:"field",hoc:function(e){return function(){return function(e){return function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.render=function(){var t=this.props,r=t.currentTheme,n=(t.getOptions,t.uiSchema),a=n.field,i=n.widget,c=n.type,s=void 0,u=void 0,p=a||c;if(r.fieldFactory.has(p))s=r.fieldFactory.get(p);else{if(!r.fieldFactory.has("default"))return console.error("找不到field："+(a||c)),null;s=r.fieldFactory.get("default")}return r.widgetFactory.has(i||c)?u=r.widgetFactory.get(i||c):r.widgetFactory.has("default")?u=r.widgetFactory.get("default"):console.warn("找不到widget："+(i||c),n),o.a.createElement(e,Object.assign({},this.props,{FieldComponent:s,WidgetComponent:u}))},r}(n.PureComponent)}}}}},function(e,t,r){"use strict";var n=r(7),o=r.n(n),a=r(2),i=r(0),c=r.n(i),s=r(1),u=(r.n(s),r(4)),p=this;function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.a={name:"array",hoc:function(e){return function(){var e=Object(s.compose)(Object(s.withHandlers)({addItem:function(e){return function(e,t){return a.a(p,void 0,void 0,o.a.mark(function r(){var n;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.uiSchema&&e.uiSchema.items){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.getDefaultData(e.ajv,e.uiSchema.items,t);case 4:n=r.sent,u.b.get(e.reducerKey||"schemaForm").actions.addItem({parentKeys:e.parentKeys,keys:e.uiSchema.keys,data:n});case 6:case"end":return r.stop()}},r,this)}))}},removeItem:function(e){return function(t,r,n){u.b.get(e.reducerKey||"schemaForm").actions.removeItem({parentKeys:t,keys:r,index:n})}},moveItem:function(e){return function(t,r,n,o){u.b.get(e.reducerKey||"schemaForm").actions.moveToItem({parentKeys:t,keys:r,curIndex:n,toIndex:o})}},initArrayComponent:function(e){return function(e,t){var r=e.ArrayComponent,n=e.ArrayItemComponent,o=a.d(e,["ArrayComponent","ArrayItemComponent"]);return"array"===e.uiSchema.type?r?c.a.createElement(r,Object.assign({},o)):null:n?c.a.createElement(n,Object.assign({},o)):null}}}));return Object(s.branch)(function(e){var t=e.uiSchema;return"array"===(void 0===t?{type:""}:t).type},function(t){var r=function(e){function r(t,n){f(this,r);var o=l(this,e.call(this,t,n));return o.initArrayComponents(),o}return h(r,e),r.prototype.initArrayComponents=function(){var e=(0,this.props.getOptions)(this.props,"hoc","array");e.ArrayComponent&&(this.ArrayComponent=e.ArrayComponent),e.ArrayItemComponent&&(this.ArrayItemComponent=e.ArrayItemComponent)},r.prototype.render=function(){var e={};return this.ArrayComponent&&(e.ArrayComponent=this.ArrayComponent),this.ArrayItemComponent&&(e.ArrayItemComponent=this.ArrayItemComponent),c.a.createElement(t,Object.assign({},this.props,e))},r}(i.PureComponent);return r=a.b([e,a.c("design:paramtypes",[Object,Object])],r)},function(t){var r=function(e){function r(){return f(this,r),l(this,e.apply(this,arguments))}return h(r,e),r.prototype.render=function(){return c.a.createElement(t,Object.assign({},this.props))},r}(c.a.PureComponent);return r=a.b([e],r)})}}}},function(e,t,r){"use strict";var n=r(7),o=r.n(n),a=r(2),i=r(0),c=r.n(i),s=r(1),u=(r.n(s),r(6)),p=(r.n(u),r(4)),f=this;t.a={name:"validate",hoc:function(e){return function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],function(e){var t=function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.render=function(){return c.a.createElement(e,Object.assign({},this.props))},r}(i.PureComponent);return t=a.b([Object(s.compose)(Object(s.withHandlers)({validate:function(e){return function(e,t){return a.a(f,void 0,void 0,o.a.mark(function r(){var n,a,i,c,s,f;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n={dirty:!0,isValid:!1,isLoading:!1},a=Object.assign({},e.uiSchema),i=setTimeout(function(){p.b.get(e.reducerKey||"schemaForm").actions.updateItemMeta({parentKeys:e.parentKeys,keys:a.keys,meta:{isLoading:!0,isValid:!1,errorText:!1}})},200),r.prev=3,c=void 0,a.schemaPath&&e.ajv.getSchema(a.schemaPath)?c=e.ajv.getSchema(a.schemaPath):a.$id?c=e.ajv.getSchema(a.$id):(delete(s=Object.assign({},u.schemaFieldFactory.get(a.schemaPath))).$id,delete s.$ref,c=e.ajv.compile(s)),r.next=8,c(t);case 8:if(n.isValid=r.sent,n.isValid){r.next=13;break}throw(f=new Error).errors=c.errors,f;case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(3),n.errorText=r.t0.errors?e.ajv.errorsText(r.t0.errors,{dataVar:e.getTitle(e).toString()}):r.t0.message;case 18:return r.prev=18,clearTimeout(i),r.finish(18);case 21:return r.abrupt("return",n);case 22:case"end":return r.stop()}},r,this,[[3,15,18,21]])}))}}}),Object(s.withHandlers)({updateItemData:function(e){return function(e,t,r){p.b.get(e.reducerKey||"schemaForm").actions.updateItemData({parentKeys:e.parentKeys,keys:e.uiSchema.keys,data:t,meta:r}),e.uiSchema.onValueChanged&&e.uiSchema.onValueChanged(e,t)}},updateItemMeta:function(e){return function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return a.a(f,void 0,void 0,o.a.mark(function a(){return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.t0=p.b.get(t.reducerKey||"schemaForm").actions,o.t1=t.parentKeys,o.t2=t.uiSchema.keys,o.t3=n,o.t3){o.next=8;break}return o.next=7,e.validate(t,r);case 7:o.t3=o.sent;case 8:o.t4=o.t3,o.t5=i,o.t6={parentKeys:o.t1,keys:o.t2,meta:o.t4,noChange:o.t5},o.t0.updateItemMeta.call(o.t0,o.t6);case 12:case"end":return o.stop()}},a,this)}))}},removeItemData:function(e){return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];p.b.get(e.reducerKey||"schemaForm").actions.removeItemData({parentKeys:e.parentKeys,keys:e.uiSchema.keys,meta:t})}}}))],t)}}}}},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(1),i=(r.n(a),r(5)),c=r.n(i),s=r(3);t.a={name:"make",hoc:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(r){return function(n){function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n),i.prototype.render=function(){var n=this.props,i=n.uiSchema,u=n.getOptions,p=i.type,f=i.field,l=u(this.props,s.a.field,f||p,c.a.fromJS(i.hocs?{hocs:i.hocs}:{}),c.a.fromJS(t||{})).hocs||["utils","theme","field","validate","array","temp"],h=a.compose.apply(void 0,[].concat(l).map(function(t){return"string"!=typeof t?t:e.get(t)()}))(r);return o.a.createElement(h,Object.assign({},this.props))},i}(n.PureComponent)}}}}},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(1),i=(r.n(a),r(3));t.a={name:"temp",hoc:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tempField:"temps",templates:[]};return function(r){return function(n){function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,n),c.prototype.render=function(){var t=this,n=this.props,c=n.uiSchema,s=n.getOptions,u=n.reducerKey;return c.options,c.keys,this.getTemplates().reduce(function(r,n){var c=n.key,p=n.Temp,f=s(t.props,i.a.template,c),l=a.compose.apply(void 0,[e.get("utils")()].concat(f.tempHocs||[]))(p);return o.a.createElement(l,{tempKey:c,ajv:t.props.ajv,uiSchema:t.props.uiSchema,schemaId:t.props.schemaId,arrayLevel:t.props.arrayLevel,reducerKey:u,arrayIndex:t.props.arrayIndex,globalOptions:t.props.globalOptions,ArrayComponent:t.props.ArrayComponent,ArrayItemComponent:t.props.ArrayItemComponent,initArrayComponent:t.props.initArrayComponent,parentKeys:t.props.parentKeys,children:r})},o.a.createElement(r,Object.assign({},this.props)))},c.prototype.getTemplates=function(){var e=this.props,r=e.uiSchema,n=e.currentTheme,o=e.getOptions,a=(r.keys,r.type),c=r.temps,s=o(this.props,i.a.field,a),u=[],p=void 0;return function e(t){switch(t.constructor){case String:n.tempFactory.has(t)?u.push({key:t,Temp:n.tempFactory.get(t)}):console.error("不存在"+t+"的temp！");break;case Object:u.push({key:t.name,Temp:t});break;case Array:[].concat(p).reverse().forEach(function(t,r){e(t)})}}(p=c||(t.templates&&t.templates.length>0?t.templates:s[t.tempField]||"default")),u},c}(n.PureComponent)}}}}},function(e,t,r){"use strict";var n=r(2),o=r(0),a=r.n(o),i=r(1),c=(r.n(i),r(9)),s=(r.n(c),r(28)),u=(r.n(s),r(5)),p=(r.n(u),r(3));var f=Object(s.createSelectorCreator)(s.defaultMemoize,u.is);t.a={name:"data",hoc:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:!0};return function(t){var r=function(r){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.render=function(){var r=this.props,n=(r.uiSchema,r.getOptions),o=(this.props.uiSchema||{}).keys,i=void 0===o?[]:o,s=n(this.props,p.a.hoc,"data");s.rootReducerKey&&s.rootReducerKey.constructor===Array||console.error("dataHoc missing property rootReducerKey.should be a Array.");var u=Object(c.connect)(function(t,r,n){return f([function(o){var a=[].concat(r,t,["data"],n);if(e.data&&o.hasIn(a)){var i=o.getIn(a);if(void 0!==i)return e.dataLength?i.size:i}},function(o){var a=[].concat(r,t,["meta"]);if(e.meta&&o.hasIn(a)){var i=o.getIn(a).containPath([].concat(n));if(i&&i.value)return e.metaKeys?i.value.filter(function(t,r){return e.metaKeys.indexOf(r)>=0}):i.value}},function(o){if(!e.treeNode)return null;var a=[].concat(r,t,["meta"]),i=o.getIn(a),c=i.containPath([].concat(n));return c||i.addChild([].concat(n))}],function(e,t,r){var n={};return void 0!==e&&null!==e&&(n.formItemData=e),void 0!==t&&null!==e&&(n.formItemMeta=t),void 0!==r&&null!==e&&(n.formItemNode=r),n})}(this.props.parentKeys,s.rootReducerKey,i))(t);return a.a.createElement(u,Object.assign({},this.props))},n}(o.PureComponent);return r=n.b([Object(i.shouldUpdate)(function(){return!1})],r)}}}}},function(e,t){e.exports=i},function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r(5),o=(r.n(n),new(r(30).a)(Object(n.fromJS)({})))},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(31),o=(r.n(n),r(5)),a=(r.n(o),r(32)),i=r(10),c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.a;var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialState=t,this.createForm=Object(n.createAction)("创建一个表单数据"),this.updateItemData=Object(n.createAction)("更新一个表单数据"),this.updateItemMeta=Object(n.createAction)("更新一个表单元数据"),this.addItem=Object(n.createAction)("添加一个数据"),this.removeItem=Object(n.createAction)("删除一个数据"),this.moveToItem=Object(n.createAction)("元素移位"),this.removeItemData=Object(n.createAction)("删除一个字段的数据以及meta数据")}return e.prototype.init=function(e){for(var t in this.actions)if(this.actions.hasOwnProperty(t)){var r=this.actions[t];r.assigned()||r.assignTo(e)}},e.prototype.removeItemDataMetaHandle=function(e,t){var r=t.parentKeys,n=t.keys,o=t.meta,a=r.concat(["data"].concat(n)),i=r.concat(["meta"]),c=e.getIn(i).containPath(n);return(e=this.resolveKeys(e,a)).hasIn(a)&&(e=e.removeIn(a)),c&&o&&c.removeFromParent(),e},e.prototype.resolveKeys=function(e,t){if(e.hasIn(t))return e;for(var r=0,n=t.length;r<n;r++){var a=[].concat(t).splice(0,r+1);if(e.hasIn(a)){if(r<n){var i=e.getIn(a);o.Map.isMap(i)||o.List.isList(i)||(e=t[r+1].constructor===Number?e.setIn(a,Object(o.List)()):e.setIn(a,Object(o.Map)()))}}else a.pop(),e.hasIn(a)||(e=t[r].constructor===Number?e.setIn(a,Object(o.List)()):e.setIn(a,Object(o.Map)()))}return e},e.prototype.createFormHandle=function(e,t){var r=t.key,n=t.data;e.has(r)&&(e=e.remove(r));var a=new i.a(r,Object(o.fromJS)({})),c=Object(o.Map)({meta:a,data:Object(o.fromJS)(n)});return e.set(r,c)},e.prototype.updateItemDataHandle=function(e,t){var r=t.parentKeys,n=t.keys,a=t.data,i=t.meta,c=r.concat(["data"].concat(n));return e=(e=this.resolveKeys(e,c)).setIn(c,Object(o.fromJS)(a)),i&&(e=this.updateItemMetaHandle(e,{parentKeys:r,keys:n,meta:i})),e},e.prototype.addItemDataHandle=function(e,t){var r=t.parentKeys,n=t.keys,a=t.data,i=r.concat(["data"].concat(n)),c=r.concat(["meta"]),s=e.getIn(c).containPath(n),u=void 0;return u=(u=(e=this.resolveKeys(e,i)).getIn(i)||Object(o.List)()).push(Object(o.fromJS)(a)),s&&s.value&&(s.value=s.value.merge({collapsing:!1})),e.setIn(i,u)},e.prototype.removeItemHandle=function(e,t){var r=t.parentKeys,n=t.keys,a=t.index,i=r.concat(["data"].concat(n)),c=r.concat(["meta"]),s=e.getIn(c).addChild(n.concat([a])),u=void 0;return(u=(e=this.resolveKeys(e,i)).getIn(i))&&o.List.isList(u)?(s&&s.removeFromParent(),e.setIn(i,u.remove(a))):e},e.prototype.moveItemHandle=function(e,t){var r=t.parentKeys,n=t.keys,o=t.curIndex,a=t.toIndex,i=r.concat(["data"].concat(n)),c=r.concat(["meta"]),s=e.getIn(c),u=(e.getIn(i),e.getIn(i)),p=s.containPath(n.concat([o])),f=s.containPath(n.concat([a]));if(e=this.resolveKeys(e,i),!u||a<0)return e;var l=u.get(o);return u=(u=u.remove(o)).insert(a-0,l),p?p.insertToFromParent(a):f&&f.insertToFromParent(o),e.setIn(i,u)},e.prototype.updateItemMetaHandle=function(e,t){var r=t.parentKeys,n=t.keys,a=t.meta,c=t.noChange,s=r.concat(["meta"]),u=e.getIn(s),p=u.containPath(n),f=p?p.value:null;if(p||(p=u.addChild(n)),p&&(p.value=f?p.value.merge(a):Object(o.fromJS)(a)),c)return e;var l=new i.a(u.getKey(),u.value);return l.children=u.children,e.setIn(s,l)},c(e,[{key:"actions",get:function(){return{createForm:this.createForm,updateItemData:this.updateItemData,updateItemMeta:this.updateItemMeta,addItem:this.addItem,removeItem:this.removeItem,moveToItem:this.moveToItem,removeItemData:this.removeItemData}}},{key:"reducer",get:function(){var e;return Object(n.createReducer)(((e={})[this.createForm]=this.createFormHandle.bind(this),e[this.updateItemData]=this.updateItemDataHandle.bind(this),e[this.updateItemMeta]=this.updateItemMetaHandle.bind(this),e[this.addItem]=this.addItemDataHandle.bind(this),e[this.removeItem]=this.removeItemHandle.bind(this),e[this.moveToItem]=this.moveItemHandle.bind(this),e[this.removeItemData]=this.removeItemDataMetaHandle.bind(this),e),this.initialState)}}]),e}()},function(e,t){e.exports=c},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=1},function(e,t,r){"use strict";var n=r(8);r.d(t,"a",function(){return n.a});r(11)},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(2),o=r(0),a=r.n(o),i=r(35),c=r(11);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.schemaId,r=e.mergeSchemaList,o=e.arrayLevel,i=e.RootComponent,s=e.children,u=n.d(e,["schemaId","mergeSchemaList","arrayLevel","RootComponent","children"]),p=r?r.map(function(e,r){var n=o?o.concat([]):[];return a.a.createElement(c.a,Object.assign({key:r},u,{schemaId:t,uiSchema:e,arrayLevel:n}))}):[];return i?a.a.createElement(i,null,p,s):a.a.createElement("div",null,p,s)},t}(o.PureComponent);s=n.b([i.a],s)},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(1),o=(r.n(n),r(4)),a=Object(n.compose)(Object(n.shouldUpdate)(function(){return!1}),o.a.get("utils")(),o.a.get("merge")())},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(2),o=r(0),a=r.n(o),i=r(37),c=(r.n(i),r(38));var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.FieldComponent,r=e.uiSchema,o=n.d(e,["FieldComponent","uiSchema"]),c=o.getOptions(this.props,"field",r.field||r.type),s=t;return t?(c.fieldHocs&&c.fieldHocs.length&&(s=i.compose.apply(void 0,c.fieldHocs||[])(t)),a.a.createElement(s,Object.assign({key:r.keys.join("formItem"),uiSchema:r},o))):(console.log(r,"没有找到匹配的field"),null)},t}(o.PureComponent);s=n.b([c.a],s)},function(e,t){e.exports=s},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(1),o=(r.n(n),r(4)),a=Object(n.compose)(o.a.get("utils")(),o.a.get("make")())},function(e,t){e.exports=u},function(e,t,r){"use strict";var n=r(41),o=r(42),a=r(43);t.a=[n.a,o.a,a.a]},function(e,t,r){"use strict";var n,o=r(2),a=r(0),i=r.n(a),c=r(1),s=(r.n(c),r(3));var u=function(e){function t(r,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.WidgetComponent,r=(e.FieldComponent,e.formItemMeta,e.formItemData,o.d(e,["WidgetComponent","FieldComponent","formItemMeta","formItemData"])),n=r.getOptions(this.props,s.a.field,"normal"),a=r.uiSchema.keys,u=t;return t&&a?(n.widgetHocs&&n.widgetHocs.length&&(u=c.compose.apply(void 0,n.widgetHocs)(t)),i.a.createElement(u,Object.assign({key:a.join(".")},r))):null},t}(a.PureComponent);t.a=((n={}).normal=u,n.default=u,n)},function(e,t,r){"use strict";var n,o=r(0),a=r.n(o),i=r(8),c=r(3),s=r(1);r.n(s);var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.arrayIndex,r=e.arrayLevel,n=e.parentKeys,o=e.globalOptions,u=e.ajv,p=(e.schemaId,e.getOptions),f=e.reducerKey,l=e.uiSchema,h=p(this.props,c.a.field,"object"),m=i.a;return null!==l.children&&l.schemaPath?(h.formHocs&&h.formHocs.constructor===Array&&(m=s.compose.apply(void 0,h.formHocs)(i.a)),a.a.createElement(m,{arrayIndex:t,arrayLevel:r,RootComponent:h.Root,reducerKey:f,schemaId:l.schemaPath,uiSchemas:l.children||["*"],uiSchema:l,parentKeys:n,globalOptions:o,ajv:u})):null},t}(o.PureComponent);t.a=((n={}).object=u,n)},function(e,t,r){"use strict";var n,o=r(0),a=r.n(o),i=r(1),c=(r.n(i),r(3)),s=r(8);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l={width:"100%",height:"100%"},h=function(e){function t(){return u(this,t),p(this,e.apply(this,arguments))}return f(t,e),t.prototype.render=function(){return a.a.createElement("div",{style:l},this.props.children)},t}(a.a.PureComponent),m=function(e){function t(r){u(this,t);var n=p(this,e.call(this,r));return n.SchemaFormWithHoc=h,n.initComponent(),n}return f(t,e),t.prototype.initComponent=function(){var e=this.props,t=(e.uiSchema,e.formItemData,(0,e.getOptions)(this.props,c.a.field,"array")),r=null,n=null;t.formHocs&&t.formHocs.constructor===Array&&(r=i.compose.apply(void 0,t.formHocs)(t.ArrayFieldComponent||h)),t.formItemHocs&&t.formItemHocs.constructor===Array&&(n=i.compose.apply(void 0,t.formItemHocs)(s.a)),this.SchemaFormWithHoc=r,this.SchemaFormItemWithHoc=n},t.prototype.renderItem=function(e){var t=this.props,r=t.parentKeys,n=t.globalOptions,o=t.getOptions,i=t.arrayLevel,u=void 0===i?[]:i,p=(t.getRequiredKeys,t.ajv),f=t.reducerKey,l=t.ArrayItemComponent,h=this.props.uiSchema,m=o(this.props,c.a.field,"array"),y=this.SchemaFormItemWithHoc||s.a;return null!==h.children&&h.schemaPath?a.a.createElement(y,{key:e,index:e,arrayIndex:e,uiSchema:h,RootComponent:m.Root,ArrayItemComponent:l,arrayLevel:u.concat([e]),reducerKey:f,schemaId:h.schemaPath,uiSchemas:h.children||["-"],parentKeys:r,globalOptions:n,ajv:p}):null},t.prototype.render=function(){for(var e=this.props,t=(e.uiSchema,e.formItemData),r=e.getOptions,n=e.getRequiredKeys,o=[],i=r(this.props,c.a.field,"array"),s=this.SchemaFormWithHoc,u=n(this.props,i.fieldIncludeKeys,i.fieldExcludeKeys),p=0;p<+t;p++)o.push(this.renderItem(p));return a.a.createElement(s,Object.assign({children:o},u))},t}(o.PureComponent);t.a=((n={}).array=m,n)},function(e,t,r){"use strict";var n=r(7),o=r.n(n),a=r(2),i=r(0),c=r.n(i),s=r(1),u=(r.n(s),r(9)),p=(r.n(u),r(5)),f=r.n(p),l=r(45),h=(r.n(l),r(3)),m=r(4),y=this;t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rootReducerKey:[],parentKeys:[]};return function(t){var r=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e));return t._validateAll=e.validateAll.bind(t),e.resetForm(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.render=function(){var r=this.props,n=(r.errors,r.isValid,r.isValidating,r.getRequiredKeys),o=r.getOptions,a=r.schemaId,i=o(this.props,h.a.hoc,"schemaFormDec"),s=n(this.props,i.hocIncludeKeys,i.hocExcludeKeys);return c.a.createElement(t,Object.assign({validateAll:this._validateAll,parentKeys:e.parentKeys,schemaId:a},s))},n}(i.PureComponent);return r=a.b([Object(s.compose)(m.a.get("utils")(),Object(u.connect)(function(t){var r=e.rootReducerKey.concat(e.parentKeys),n=r.concat(["data"]),o=r.concat(["meta"]),a=t.getIn(o);return{data:t.getIn(n),root:a,isValid:!a||a.value.get("isValid"),errors:a?a.value.get("errors"):null,isValidating:!!a&&a.value.get("isLoading")}}),Object(s.withHandlers)({validateAll:function(t){var r=m.b.get(t.reducerKey).actions.updateItemMeta,n=void 0;return function(i){return a.a(y,void 0,void 0,o.a.mark(function a(){var i,c,s,u,p;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i=t.root,c=t.ajv.getSchema(t.schemaId),s=f.a.fromJS({dirty:!0,isValid:!0,isLoading:!0}),u=f.a.fromJS({isLoading:!1,dirty:!0}),p=t.normalizeDataPath,i){o.next=3;break}return o.abrupt("return");case 3:if(c){o.next=5;break}throw new Error("没有找到对应的"+t.schemaId+";");case 5:return o.prev=5,i.forEach(function(e){return e.value?e.value.merge(s):s},!0),n=setTimeout(function(){r({parentKeys:e.parentKeys,keys:[],meta:i.value})},200),t.ajv.errors=null,o.next=11,c(t.data.toJS());case 11:if(o.sent){o.next=14;break}throw new l.ValidationError(c.errors.concat(t.ajv.errors||[]));case 14:i.value=i.value.merge({isValid:!0}),r({parentKeys:e.parentKeys,keys:[],meta:i.value}),o.next=26;break;case 18:if(o.prev=18,o.t0=o.catch(5),o.t0 instanceof l.ValidationError){o.next=22;break}return o.abrupt("return",console.error(o.t0));case 22:if(i){o.next=24;break}return o.abrupt("return");case 24:o.t0.errors.forEach(function(e){var r=i.getCurrentKeys().concat(p(t.schemaId,e.dataPath)),n=i.containPath(r);n||(n=i.addChild(r,f.a.fromJS({}))),n&&(n.value=n.value.merge(u).merge({isValid:!1,errorText:r.pop()+" "+e.message}))}),i.value=i.value.merge({isValid:!1,errors:o.t0.errors});case 26:return o.prev=26,clearTimeout(n),i.forEach(function(e){return e.value?e.value.merge(u):e.value},!0),r({parentKeys:e.parentKeys,keys:[],meta:i.value}),o.finish(26);case 31:case"end":return o.stop()}},a,this,[[5,18,26,31]])}))}},resetForm:function(e){return function(){e.formKey&&(0,m.b.get(e.reducerKey).actions.createForm)({key:e.formKey,data:e.initData||{}})}}})),a.c("design:paramtypes",[Object])],r)}}},function(e,t){e.exports=p}]).default});
//# sourceMappingURL=index.js.map